(self.webpackChunkreactjs=self.webpackChunkreactjs||[]).push([[8312],{38309:function(e,t,n){var a=n(989),r=/^\s+/;e.exports=function(e){return e?e.slice(0,a(e)+1).replace(r,""):e}},989:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},75132:function(e,t,n){var a=n(57996),r=n(10905),s=n(69075),l=Math.max,i=Math.min;e.exports=function(e,t,n){var o,c,u,d,m,p,f=0,h=!1,g=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function E(t){var n=o,a=c;return o=c=void 0,f=t,d=e.apply(a,n)}function y(e){return f=e,m=setTimeout(w,t),h?E(e):d}function b(e){var n=e-p;return void 0===p||n>=t||n<0||g&&e-f>=u}function w(){var e=r();if(b(e))return N(e);m=setTimeout(w,function(e){var n=t-(e-p);return g?i(n,u-(e-f)):n}(e))}function N(e){return m=void 0,v&&o?E(e):(o=c=void 0,d)}function C(){var e=r(),n=b(e);if(o=arguments,c=this,p=e,n){if(void 0===m)return y(p);if(g)return clearTimeout(m),m=setTimeout(w,t),E(p)}return void 0===m&&(m=setTimeout(w,t)),d}return t=s(t)||0,a(n)&&(h=!!n.leading,u=(g="maxWait"in n)?l(s(n.maxWait)||0,t):u,v="trailing"in n?!!n.trailing:v),C.cancel=function(){void 0!==m&&clearTimeout(m),f=0,o=p=c=m=void 0},C.flush=function(){return void 0===m?d:N(r())},C}},10905:function(e,t,n){var a=n(40060);e.exports=function(){return a.Date.now()}},69075:function(e,t,n){var a=n(38309),r=n(57996),s=n(85639),l=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(s(e))return NaN;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=a(e);var n=i.test(e);return n||o.test(e)?c(e.slice(2),n?2:8):l.test(e)?NaN:+e}},14679:function(e,t,n){"use strict";n.d(t,{A:function(){return i}});var a=n(41481),r=n(94050),s=n(77981),l=n(23706),i=function(e){let{category:t,variant:n="full"}=e;const{imageURL:i,label:o,color:c}=function(e){const t=(0,s.d4)((e=>e.entities.domain.properties["metadata#asset_categories"])),{i18n:n}=(0,a.useContext)(l.gJ),r=t.find((t=>{let{labels:a}=t;return e===a[n.shortLanguageCode]}));if(!r)throw new Error(`useAssetCategory - asset category not found for category: ${e}`);return{imageURL:r.image_url,label:r.labels[n.shortLanguageCode],color:r.color}}(t),u="compact"!==n||i?{border:`1px solid ${c}`}:void 0;return a.createElement("div",{className:"ZSVBLFAyThZBVJE09y4o",style:u},!!i&&a.createElement("div",{className:"O8CezFTUR13Dnk5PAUVg",style:{color:c}},a.createElement(r.A,{url:i})),"full"===n&&a.createElement("span",null,o))}},44396:function(e,t,n){"use strict";var a=n(76877),r=n.n(a),s=n(41481),l=n(23706),i=n(79028),o=n.n(i);t.A=(0,l.zn)((function(e){let{locale:t=null,format:n="LL",date:a=o()(),fromNow:i=!1,i18n:c=new l.F2,capitalize:u=!1}=e;const d=(o().isMoment(a)?a.clone():o()(a)).locale(t||c.languageCode),m=i?d.fromNow():d.format(n),p=u?r()(m):m;return s.createElement(s.Fragment,null,p)}))},94050:function(e,t,n){"use strict";n.d(t,{A:function(){return f}});var a=n(84016),r=n.n(a),s=n(64516),l=n.n(s),i=n(41481),o=n(81713),c=n.n(o),u=n(44310);const d={};function m(e){return e.startsWith("/static/pictos/img/")}class p extends i.PureComponent{constructor(e){super(e);const{svg:t}=e;this.state={svg:t},this.cancelRequestFunction=null}componentDidMount(){const{url:e}=this.props;e&&this.fetchSVG()}componentDidUpdate(e){const{url:t,svg:n}=this.props,{url:a,svg:r}=e;t&&t!==a?(this.cancelCurrentRequest(),this.fetchSVG()):n&&n!==r&&this.updateSVG()}componentWillUnmount(){this.cancelCurrentRequest()}cancelCurrentRequest=()=>{this.cancelRequestFunction&&(this.cancelRequestFunction(),this.cancelRequestFunction=null)};updateSVG=()=>{const{svg:e}=this.props;this.setState({svg:e})};fetchSVG=()=>{const{url:e}=this.props;if(d[e])return void this.setState({svg:d[e]});const t=a.CancelToken.source();this.cancelRequestFunction=t.cancel,r().get(e,{cancelToken:t.token}).then((t=>{d[e]=t.data,this.cancelRequestFunction=null,this.setState({svg:t.data})})).catch((e=>{this.cancelRequestFunction=null,r().isCancel(e)||this.setState({svg:'<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg id="dot-icon" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">    <path d="M13,9.50004202 C13,11.4330618 11.4329777,13.000084 9.49995798,13.000084 C7.56693813,13.000084 5.99991595,11.4330618 5.99991595,9.50004202 C5.99991595,7.56702218 7.56693813,6 9.49995798,6 C11.4329777,6 13,7.56702218 13,9.50004202 L13,9.50004202 Z" id="path8568" fill="#000000"></path>    <rect style="opacity: 0" x="0" y="0" width="19" height="19"></rect></svg>'})}))};render(){const{color:e,url:t,className:n}=this.props,{svg:a}=this.state;return i.createElement(u.A,{isLoading:!a},i.createElement("span",{style:t&&!m(t)?void 0:{fill:e},className:l()("rods-inline-svg",n),dangerouslySetInnerHTML:{__html:a}}))}}p.propTypes={url:c().string,svg:e=>e.url&&e.svg?new Error("svg and url props cannot be used simultaneously"):e.url||e.svg?void 0:new Error("The url or svg props are required"),color:c().string,className:c().string},p.defaultProps={color:null,svg:null,className:""};var f=p},44310:function(e,t,n){"use strict";n.d(t,{A:function(){return d}});var a=n(41481),r=n(81713),s=n.n(r),l=n(64516),i=n.n(l),o=n(42738),c=n(52588);function u(e){let{isLoading:t,spinAfter:n,spinAtLeast:r,spinner:s,children:l,paddingTop:c,aspectRatio:u,graceTimePlaceholder:d}=e;const m=(0,o.A)(t,n,r);return t&&!m?d:m?a.createElement("div",{className:i()("rods-loading-container",{"rods-loading-container--padding-top":c}),style:u?{aspectRatio:u.toString()}:null},s):l}u.propTypes={children:s().node,spinner:s().node,isLoading:s().bool,spinAfter:s().number,spinAtLeast:s().number,paddingTop:s().bool,aspectRatio:s().number,graceTimePlaceholder:s().node},u.defaultProps={spinAfter:void 0,spinAtLeast:void 0,isLoading:!0,children:null,spinner:a.createElement(c.A,{size:44,variant:"light-700"}),paddingTop:!1,aspectRatio:null,graceTimePlaceholder:null};var d=u},451:function(e,t,n){"use strict";n.d(t,{X:function(){return Q},A:function(){return B}});var a=n(29894),r=n(41481),s=n(64516),l=n.n(s),i=n(61041),o=n(23706),c=n(75132),u=n.n(c),d=n(58899),m=n(77981),p=n(84016),f=n.n(p),h=n(60546),g=n(46073),v=n(41438),E=n(9840);const y=e=>{const{query:t,clickedElement:n,uid:a,rank:r}=e;(0,E.QH)(E.$0.VECTOR_SEARCH_RESPONSE_CLICKED,{query:t,clickedElement:n,rank:r,uid:a},{transport:"sendBeacon"})},b=["asset_type","category","updated_at","uid","title","description","content_link"],w=['"ods_dataset" as asset_type','"data" as category',"modified as updated_at","dataset_id as uid","title","description","publisher as creator"];var N=e=>{const t=(0,d.D)(),{i18n:n}=(0,r.useContext)(o.gJ),[a,s]=(0,r.useState)(""),[l,,i,c]=(0,g.A)(!1),p=(0,r.useRef)(null),[y,N]=(0,r.useState)(null),[C,A]=(0,r.useState)(null),[x,,S,_]=(0,g.A)(!1),[k,R]=(0,r.useState)(null),{enable_multi_assets:L}=(0,m.d4)((e=>e.entities.domain.license)),M=(0,r.useMemo)((()=>L?v.qs:v.yA),[L]),T=(0,r.useMemo)((()=>L?b.join(", "):w.join(", ")),[L]);(0,r.useEffect)((()=>()=>p.current?.abort()),[]);const q=(0,r.useCallback)((async a=>{p.current?.abort(),p.current=new AbortController,(e=>{const{query:t,isFirstQuery:n,searchContext:a}=e;(0,E.QH)(E.$0.VECTOR_SEARCH_QUERIED,{query:t,isFirstQuery:n,searchContext:a}),function(e,t){if(window.$screeb)try{window.$screeb("event.track","vector-search-queried",void 0)}catch{}}()})({query:a,isFirstQuery:!x&&!l,searchContext:e}),S(),R(null);try{const{results:e}=await M(t,{select:`${T}, score() as score`,orderBy:"score DESC",where:`vector_similarity_threshold(${(0,h.Yj)(a)})`,limit:8,lang:n.shortLanguageCode},p.current);p.current=null,N(e),A(e),i(),_()}catch(e){if(!f().isAxiosError(e))throw e;e.message&&"canceled"===e.message||(_(),500===e.response?.status?R(n.translate("The service returned an unexpected error. Please contact the support.")):503===e.response?.status?R(n.translate("The service seems to be unreachable at the moment. Please try again later.")):console.error(e))}}),[t,i,S,_,n,l,x,e,M,T]),I=(0,r.useMemo)((()=>u()(q,500)),[q]);return{onSearch:(0,r.useCallback)((e=>{s(e),e||(_(),c(),N(null),A(y),p.current?.abort(),p.current=null),e.length>=3&&I(e)}),[_,c,y,I]),currentSearch:a,firstResults:l,results:C,isLoading:x,error:k,isMultiAssetEnabled:L}},C=n(90590);let A=function(e){return e.Widget="widget",e.Navbar="navbar",e}({});var x=n(19692),S=n(79028),_=n.n(S),k=n(26782),R=n(24817),L=n(8216),M=n(44396),T=n(16665),q=n(14679),I=n(26235),F={fontSizeBase:"16px",identity100:"#00c7b1",identity200:"#142e7b",identity201:"#f2f3f8",identity203:"#c6cbde",identity204:"#6c7aaa",identity300:"#0f79d0",light100:"#fff",light200:"#f6f8fb",light300:"#dee5ef",light400:"#cbd2db",light500:"#898d92",light600:"#565656",light700:"#000",extra710:"#94153c",colorCritical:"#ce0037",borderRadius4:"4px",spacing50:"6px",spacing100:"13px",breakpointXL:"1200px",container:"D2gs7nfVu6mXmBersyyL",isEmpty:"gWGH64QnjpLRnIDFN_Mk",list:"iMwbPJl0wAdLCW_AVr4L",listIsInlined:"JdMsLwwX6gpENb8ttoWZ",item:"DMGcriIc09_1F0RgPFd8",title:"g9De8S2Y8V4KYpmVMWqA",itemTextContent:"lQurm2h0QLUekD6pxKeE",assetTitle:"rN2802JVKHJsH_DlCigx",assetSubtitle:"XwuESVv2Sp_3ccAZgu5J",dataIcon:"hYczZBhwloRbOjTm1pHk",visualizationIcon:"WL0U_jd9QY_T8KqejdzL",applicationIcon:"U0Z5iwhjeOoYycCR6bg8",footer:"E7Db1eb7RSMPH56SQhjD",goToCatalog:"WxzYBCQxIxIhQ1gPAaEi",noMatch:"CkNV8MgatZVU7HvCEmRw",preview:"mqk5o5INBfNl75bDC1eZ",previewTitle:"jzpSKpowgJoqlx1xceaP",previewSubtitle:"yR68ATFXieBfMs1WeqUg",previewDescription:"lv2fn52Kx5LIZGtaPsRr"};function U(e,t){return e?t.content_link?t.content_link:void 0:`/explore/dataset/${t.uid}/`}function V(e){let{asset:t,isMultiAssetEnabled:n}=e;return r.createElement(r.Fragment,null,n?r.createElement(q.A,{category:t.category,variant:"compact"}):r.createElement(R.N$_,{className:F.dataIcon}),r.createElement("span",{className:F.itemTextContent},r.createElement("span",{className:F.assetTitle},t.title),r.createElement("span",{className:F.assetSubtitle},n&&t.category,r.createElement(L.A,{comment:"e.g.: Updated Feb 13, 2024",translationKey:"Updated <0/>",components:[r.createElement(M.A,{fromNow:!0,date:_()(t.updated_at)})]}))))}function D(e){let{asset:t,isMultiAssetEnabled:n}=e;const{i18n:a}=(0,r.useContext)(o.gJ),{category:s}=t;return r.createElement(r.Fragment,null,r.createElement("span",{className:F.previewTitle},t.title),r.createElement("span",{className:F.previewSubtitle},n&&s,r.createElement(L.A,{comment:"e.g.: Updated Feb 13, 2024",translationKey:"Updated <0/>",components:[r.createElement(M.A,{fromNow:!0,date:_()(t.updated_at)})]}),function(e,t,n){return e||!t.creator?"":r.createElement(r.Fragment,null," • ",n.translate("Published by")," ",r.createElement("b",null,t.creator))}(n,t,a)),t.description&&r.createElement("p",{className:F.previewDescription},(0,k.tN)(t.description)))}function P(e){const{i18n:t}=(0,r.useContext)(o.gJ),{results:n,className:a,query:s,isMultiAssetEnabled:i,searchQueryInput:c,isInlined:u}=e,d=n&&n.length>0,m=(0,r.useRef)(null),[p,f]=(0,r.useState)(0),[h,g]=(0,r.useState)(!1),v=(0,r.useCallback)((e=>{if(n)if("ArrowDown"===e.key)e.preventDefault(),c?.querySelector("input")?.focus(),f((e=>(e+1)%n.length));else if("ArrowUp"===e.key)e.preventDefault(),c?.querySelector("input")?.focus(),f((e=>(e-1+n.length)%n.length));else if("Enter"===e.key&&n[p]){const e=U(i,n[p]);e&&(window.location.href=e)}}),[n,p,i,c]),E=(0,r.useCallback)((e=>{h&&f(e)}),[h]);return(0,r.useEffect)((()=>(window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v))),[v]),(0,r.useEffect)((()=>{if(m&&m.current){const e=m.current,t=()=>g(!0);return e.addEventListener("mousemove",t),()=>e.removeEventListener("mousemove",t)}}),[]),(0,r.useEffect)((()=>{f(0)}),[n]),d?r.createElement("div",{role:"listbox",className:l()(F.container,a),ref:m},r.createElement("div",{className:l()(F.list,{[F.listIsInlined]:u})},!d&&r.createElement("span",{className:F.noMatch},t.translate("We didn't find any resources linked to your search")),d&&r.createElement("span",{className:F.title},r.createElement(L.A,{translationKey:"Best matches"})),n?.map(((e,n)=>r.createElement("a",{role:"option","aria-selected":n===p,onMouseEnter:()=>E(n),onFocus:()=>f(n),key:e.uid,href:U(i,e),onClick:()=>y({query:s,clickedElement:e.asset_type.startsWith("ods_")?e.asset_type.slice(4):e.asset_type,rank:n+1,uid:e.uid}),title:e.title,className:F.item},r.createElement(T.A,{errorMessage:t.translate("Unable to display asset {uid} (issue with metadata)",{uid:e.uid})},r.createElement(V,{isMultiAssetEnabled:i,asset:e}))))),d&&r.createElement("span",{className:F.footer},r.createElement(L.A,{translationKey:"Try another search or"}),r.createElement("a",{className:F.goToCatalog,href:i?`/explore/?version=new&search=${encodeURIComponent(s)}`:"/explore/",onClick:()=>y({query:s,clickedElement:"go_to_catalog"})},t.translate("Explore the catalog")))),r.createElement("aside",{className:F.preview},r.createElement(T.A,{errorMessage:t.translate("Unable to display a preview for asset {uid} (issue with metadata)",{uid:n[p].uid}),key:n[p].uid},n[p]&&r.createElement(D,{asset:n[p],isMultiAssetEnabled:i})))):r.createElement("div",{className:l()(F.main,F.isEmpty,a)},r.createElement("span",{className:F.noMatch},t.translate("We didn't find any resources linked to your search")),r.createElement(I.A,{tag:"a",variant:"secondary",href:"/explore/"},t.translate("Go to our catalog")))}function Q(e){let{closeModal:t,placeholder:n,autoFocus:a=!1}=e;const{i18n:s}=(0,r.useContext)(o.gJ),{onSearch:l,currentSearch:i,firstResults:c,results:u,isLoading:d,error:m,isMultiAssetEnabled:p}=N(A.Navbar),f=(0,r.useRef)(null),h=(0,r.useMemo)((()=>n||(p?s.translate("Search for an asset, or ask a question"):s.translate("Search for a dataset, or ask a question"))),[n,p,s]);return r.createElement("div",{className:"tszQZEJtHOhaTKJNpVQJ"},r.createElement("div",{className:"y5jUP8scViXUtlMypuIG"},r.createElement(x.A,{ref:f,onChange:l,value:i,label:h,isLoading:d,autoFocus:a,className:"K9FS4PV6zVMGInlVLwjf"}),r.createElement("div",{className:"Y8DklYBXLV2aKn3ykUrc"},r.createElement("button",{type:"button",onClick:t,className:"qlify1CpJSW1ZSaUKYeV"},r.createElement(L.A,{translationKey:"Close"})))),c&&i&&r.createElement(P,{results:u,className:"yRSjoY8pI9z7vxOf0Nwv",query:i,isMultiAssetEnabled:p,searchQueryInput:f.current,isInlined:!0}),!c&&r.createElement("div",{className:"jvBSXmsIXa5RX0ZIP1Ed"},r.createElement(R.QF8,{className:"tHs8G46j6VbxMyE4MUSm"}),r.createElement("div",{className:"b5is3IdiUosJwNNWwlfu"},r.createElement(L.A,{translationKey:"Start typing to search..."}))),m&&r.createElement(C.Ay,{initialOpen:!0,variant:"critical"},r.createElement(C.Ay.Header,null,m)))}var B=function(e){let{label:t,className:n,autoFocus:s=!1}=e;const{i18n:c}=(0,r.useContext)(o.gJ),{onSearch:u,currentSearch:d,firstResults:m,results:p,isLoading:f,error:h,isMultiAssetEnabled:g}=N(A.Widget),[v,E]=(0,r.useState)(null),[y,b]=(0,r.useState)(null),{styles:w,attributes:S}=(0,i.E)(y,v,{placement:"bottom",modifiers:[{name:"flip",options:{fallbackPlacements:["bottom"]}}]});return r.createElement("div",{className:l()("kPa_7xOBkmiVIHmGLMSO",n)},r.createElement(x.A,{ref:b,onChange:u,value:d,label:t||c.translate("Search for a dataset, or ask a question"),className:"aaSZBMQge7Zn8w_esBX2",isLoading:f,autoFocus:s}),m&&d&&r.createElement("div",(0,a.A)({ref:E,style:w.popper},S.popper,{className:"pezz2YwVQhKKlU08GqCi"}),r.createElement(P,{results:p,className:"meOUfXficwwhDwb3z1W4",query:d,isMultiAssetEnabled:g,searchQueryInput:y})),h&&r.createElement(C.Ay,{initialOpen:!0,variant:"critical",className:"HuiaRCEh79kp2tVx7zDs"},r.createElement(C.Ay.Header,null,h)))}},7206:function(e,t,n){"use strict";var a=n(29894),r=n(41481),s=n(64516),l=n.n(s),i=n(23706),o=n(24817);const c=r.forwardRef(((e,t)=>{let{onChange:n,label:s="",placeholder:c="",value:u="",isLoading:d=!1,onClear:m=(()=>{}),onBlur:p=(()=>{}),trimOnBlur:f=!1,className:h="",disabled:g,...v}=e;const{i18n:E}=(0,r.useContext)(i.gJ),y=(0,r.useRef)(null),b=()=>{n&&n("",{}),y.current?.focus(),m&&m()};return r.createElement("div",{className:l()(h,"rods-search-filter__wrapper",{"rods-search-filter__wrapper--has-value":u,"rods-search-filter__wrapper--disabled":g}),ref:t},r.createElement("input",(0,a.A)({ref:y,className:"rods-search-filter__input",type:"text",onChange:e=>{n&&n(e.target.value,e)},value:u,onBlur:e=>{n&&f&&e.target.value.trim()!==e.target.value&&n(e.target.value.trim(),e),p&&p(e)},disabled:g,placeholder:c},v)),r.createElement("label",null,s),(()=>{let e;return e=d?r.createElement(o.Itq,{"aria-live":"polite","aria-label":E.translate("Loading in progress"),"aria-busy":"true",className:"rods-search-filter__spinner"}):u?r.createElement("span",{role:"button",onClick:b,"aria-label":E.translate("Clear value"),tabIndex:-1},r.createElement(o.$a3,{className:"rods-search-filter__icon__delete-icon"})):r.createElement(o.QF8,null),r.createElement("span",{className:"rods-search-filter__icon"},e)})())}));t.A=c},42738:function(e,t,n){"use strict";n.d(t,{A:function(){return s}});var a=n(41481);function r(){const e=(0,a.useRef)(!1);return(0,a.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),e}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;const s=r(),l=Boolean(e),[i,o]=(0,a.useState)(!1),c=(0,a.useRef)(null),u=(0,a.useRef)(null),d=(0,a.useRef)(l);return d.current=l,(0,a.useEffect)((()=>{!0===l&&!1===i&&null===c.current?c.current=setTimeout((()=>{s.current&&(c.current=null,!0===d.current&&(o(!0),u.current=setTimeout((()=>{s.current&&(u.current=null,!0!==d.current&&o(!1))}),n)))}),t):!1===l&&!0===i&&null===c.current&&null===u.current&&o(!1)}),[i,l,s,t,n]),!(!e||0!==t)||i}}}]);