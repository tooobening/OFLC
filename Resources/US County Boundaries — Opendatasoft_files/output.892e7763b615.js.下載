(function(){'use strict';var mod=angular.module('ods.header',['ods.minimal']);mod.controller('HeaderController',['config','$scope',function(config,$scope){$scope.user={is_authenticated:config.USER!==null,};$scope.domain={languages:config.AVAILABLE_LANGUAGES,current_language:config.LANGUAGE};}]);}());;(function(){'use strict';var mod=angular.module('ods.footer',['ods.minimal']);mod.controller('FooterController',['config','$scope',function(config,$scope){$scope.user={is_authenticated:config.USER!==null,};$scope.domain={languages:config.AVAILABLE_LANGUAGES,current_language:config.LANGUAGE};}]);}());;(function(){'use strict';var mod=angular.module('ods.header');mod.directive('odsResponsiveMenu',function(){return{restrict:'A',replace:true,scope:{breakpoint:'='},controller:function($scope,$element){var that=this;var collapseHeader=function(){var windowWidth=window.innerWidth;if(windowWidth<$scope.breakpoint){$element.addClass('ods-responsive-menu--collapsed');$element.find('.ods-responsive-menu-placeholder').addClass('ods-responsive-menu-placeholder--active');$element.find('.ods-responsive-menu-collapsible').addClass('ods-responsive-menu-collapsible--collapsed');if(that.isExpanded===true){$('body').css({'overflow-y':'hidden'});}}else{$element.removeClass('ods-responsive-menu--collapsed');$element.find('.ods-responsive-menu-placeholder').removeClass('ods-responsive-menu-placeholder--active');$element.find('.ods-responsive-menu-collapsible').removeClass('ods-responsive-menu-collapsible--collapsed');$('body').css({'overflow-y':'initial'});}};collapseHeader();$(window).on('resize',collapseHeader);$element.on('click',function(event){if($(event.target).hasClass('ods-responsive-menu-collapsible__backdrop')){that.toggleMenu();}});}};});mod.directive('odsResponsiveMenuPlaceholder',function(){return{require:'^odsResponsiveMenu',restrict:'E',transclude:true,replace:true,template:''+'<div class="ods-responsive-menu-placeholder">'+'    <button class="ods-responsive-menu-placeholder__toggle"'+'            ng-click="toggleMenu()"'+'            aria-label="Open menu"'+'            translate="aria-label">'+'       <i class="fa fa-bars" aria-hidden="true"></i>'+'    </button>'+'    <div class="ods-responsive-menu-placeholder__container" ng-transclude></div>'+'</div>',link:function(scope,element,attrs,collapsibleMenuController){scope.toggleMenu=collapsibleMenuController.toggleMenu;}};});mod.directive('odsResponsiveMenuCollapsible',function(){return{require:'^odsResponsiveMenu',restrict:'E',transclude:true,replace:true,template:''+'<div class="ods-responsive-menu-collapsible">'+'    <div class="ods-responsive-menu-collapsible__backdrop"></div>'+'    <div class="ods-responsive-menu-collapsible__container">'+'        <div class="ods-responsive-menu-collapsible__toggle">'+'            <button ng-click="toggleMenu()"'+'                    class="ods-responsive-menu-collapsible__toggle-button"'+'                    aria-label="Close menu" translate="aria-label">'+'                <i class="fa fa-close" aria-hidden="true"></i>'+'            </button>'+'        </div>'+'        <div class="ods-responsive-menu-collapsible__content" ng-transclude></div>'+'    </div>'+'</div>',link:function(scope,element,attrs,collapsibleMenuController){var toggleMenu=function(){if(element.hasClass('ods-responsive-menu-collapsible--expanded')){element.removeClass('ods-responsive-menu-collapsible--expanded');$('body').css({'overflow-y':'initial'});collapsibleMenuController.isExpanded=false;}else{element.addClass('ods-responsive-menu-collapsible--expanded');$('body').css({'overflow-y':'hidden'});collapsibleMenuController.isExpanded=true;}};scope.toggleMenu=toggleMenu;collapsibleMenuController.toggleMenu=toggleMenu;}};});})();;(function(){'use strict';var mod=angular.module('ods.header');mod.directive('odsSkipToContentLink',['$window',function($window){return{restrict:'E',template:''+'<ul class="ods-skip-to-content">'+'   <li>'+'       <a ng-href="{{linkUrl}}#main" class="ods-skip-to-content-link">'+'           <translate>Skip to content</translate>'+'       </a>'+'   </li>'+'   <li>'+'       <a ng-href="{{linkUrl}}#footer" class="ods-skip-to-content-link">'+'           <translate>Skip to footer</translate>'+'       </a>'+'   </li>'+'</ul>',link:function(scope,element){angular.forEach(element.children(),function(linkElement){linkElement.addEventListener('click',function(e){e.preventDefault();var href=new URL(e.target.href);var targetElement=$window.document.getElementById(href.hash.substring(1));targetElement.tabIndex='-1';targetElement.focus();targetElement.scrollIntoView(true);});});}};}]);})();;(function(){'use strict';var mod=angular.module('ods.footer');var cookieParams={old:{path:'/',expires:183,partitioned:false,sameSite:undefined,secure:false,},new:{path:'/',expires:183,partitioned:true,sameSite:'none',secure:true,}};mod.directive('odsManageCookiesPreferences',function(){return{restrict:'E',scope:{displayBanner:'=',gaConfigured:'=',ga4Configured:'=',matomoConfigured:'=',matomoConsentRequired:'=',xitiConfigured:'=',xitiConsentRequired:'=',atConfigured:'=',atConsentMode:'@',pianoConfigured:'=',pianoConsentMode:'@',eulerianConfigured:'=',eulerianConsentRequired:'=',trackingLastUpdate:'='},template:''+'<a class="ods-front-footer__link ods-manage-cookies-preferences__show-button"'+'    ng-if="displayBanner"'+'    tabindex="0"'+'    ng-keydown="$event.keyCode === 13 && showCookiesPreferences()"'+'    ng-click="showCookiesPreferences()" translate>'+'    Manage cookies'+'</a>'+'<ods-manage-cookies-preferences-modal'+'   ng-if="(cookiesPreferencesEnabled() && !hasValidCookiesPreferences()) || (displayBanner && open)"'+'   ga-configured="gaConfigured"'+'   ga4-configured="ga4Configured"'+'   matomo-configured="matomoConfigured"'+'   matomo-consent-required="matomoConsentRequired"'+'   xiti-configured="xitiConfigured"'+'   xiti-consent-required="xitiConsentRequired"'+'   at-configured="atConfigured"'+'   at-consent-mode="atConsentMode"'+'   piano-configured="pianoConfigured"'+'   piano-consent-mode="pianoConsentMode"'+'   eulerian-configured="eulerianConfigured"'+'   eulerian-consent-required="eulerianConsentRequired"'+'   tracking-last-update="trackingLastUpdate"'+'></ods-manage-cookies-preferences-modal>',controller:function($scope){$scope.open=false;$scope.hasValidCookiesPreferences=function(){var cookiesPreferences=JSON.parse(Cookies.get('cookies_preferences')||null);return cookiesPreferences&&(!$scope.trackingLastUpdate||cookiesPreferences.timestamp>$scope.trackingLastUpdate);};$scope.cookiesPreferencesEnabled=function(){return $scope.displayBanner&&($scope.gaConfigured||$scope.ga4Configured||($scope.matomoConfigured&&$scope.matomoConsentRequired)||($scope.xitiConfigured&&$scope.xitiConsentRequired)||($scope.atConfigured&&$scope.atConsentMode==='consent_required')||($scope.pianoConfigured&&$scope.pianoConsentMode==='consent_required')||($scope.eulerianConfigured&&$scope.eulerianConsentRequired));};$scope.showCookiesPreferences=function(){$scope.open=true;};this.closeCookiesPreferences=function(){$scope.open=false;};}};});mod.directive('odsManageCookiesPreferencesModal',['CookiesAPI',function(CookiesAPI){return{restrict:'E',require:'^odsManageCookiesPreferences',scope:{gaConfigured:'=',ga4Configured:'=',matomoConfigured:'=',matomoConsentRequired:'=',xitiConfigured:'=',xitiConsentRequired:'=',atConfigured:'=',atConsentMode:'=',pianoConfigured:'=',pianoConsentMode:'=',eulerianConfigured:'=',eulerianConsentRequired:'=',trackingLastUpdate:'='},templateUrl:'/ng-templates/manage-cookies-preferences.html',controller:function($scope,translate){$scope.currentPreferences={functional_cookies_consent:true,ga_consent:false,matomo_consent:$scope.matomoConfigured&&!$scope.matomoConsentRequired,xiti_consent:$scope.xitiConfigured&&!$scope.xitiConsentRequired,at_consent:$scope.atConfigured&&$scope.atConsentMode!=='consent_required',piano_consent:$scope.pianoConfigured&&$scope.pianoConsentMode!=='consent_required',eulerian_consent:$scope.eulerianConfigured&&!$scope.eulerianConsentRequired,};$scope.trackers=[{name:'ga',label:translate('Google Analytics'),configured:$scope.gaConfigured||$scope.ga4Configured},{name:'matomo',label:translate('Matomo'),configured:$scope.matomoConfigured},{name:'xiti',label:translate('XiTi'),configured:$scope.xitiConfigured},{name:'at',label:translate('AT Internet'),configured:$scope.atConfigured},{name:'piano',label:translate('Piano Analytics'),configured:$scope.pianoConfigured},{name:'eulerian',label:translate('Eulerian'),configured:$scope.eulerianConfigured}];$scope.audienceMeasurementLabels={enabled:translate('Enabled'),disabled:translate('Disabled')};$scope.retrieveCookiesPreferences=function(){var cookiesPreferences=JSON.parse(Cookies.get('cookies_preferences')||null);if(cookiesPreferences&&(!$scope.trackingLastUpdate||cookiesPreferences.timestamp>$scope.trackingLastUpdate)){$scope.currentPreferences={functional_cookies_consent:cookiesPreferences.functional_cookies,ga_consent:cookiesPreferences.ga,matomo_consent:cookiesPreferences.matomo,xiti_consent:cookiesPreferences.xiti,at_consent:cookiesPreferences.at,piano_consent:cookiesPreferences.piano,eulerian_consent:cookiesPreferences.eulerian};}};$scope.injectTrackers=function(){if($scope.gaConfigured&&!window.gaLoaded&&$scope.currentPreferences.ga_consent){window.loadGoogleAnalytics();}
if($scope.ga4Configured&&!window.ga4Loaded&&$scope.currentPreferences.ga_consent){window.loadGoogleAnalytics4();}
if($scope.matomoConfigured&&!window.matomoLoaded&&$scope.currentPreferences.matomo_consent){window.loadMatomo();}
if($scope.xitiConfigured&&!window.xitiLoaded&&$scope.currentPreferences.xiti_consent){window.loadXiti();}
if($scope.atConfigured){if($scope.currentPreferences.at_consent&&window.setVisitorModeCNIL&&window.setVisitorOptin&&window.sendPageViewEvent){if($scope.atConsentMode==='consent_exemption')window.setVisitorModeCNIL();else window.setVisitorOptin();window.sendPageViewEvent();}else if(!$scope.currentPreferences.at_consent&&window.setVisitorOptout){window.setVisitorOptout();}}
if($scope.pianoConfigured){if($scope.currentPreferences.piano_consent&&window.setConsentMode&&window.sendPageDisplayEvent){if($scope.atConsentMode==='consent_exemption')window.setConsentMode('essential');else window.setConsentMode('opt-in');window.sendPageDisplayEvent();}else if(!$scope.currentPreferences.piano_consent&&window.setConsentMode){window.setConsentMode('opt-out');}}
if($scope.eulerianConfigured&&!window.eulerianLoaded&&$scope.currentPreferences.eulerian_consent){window.loadEulerian();}};$scope.removeOptedOutTrackingCookies=function(){angular.forEach(Object.keys(Cookies.get()),function(cookie){if(!$scope.currentPreferences.ga_consent&&(['_ga','_gat','_gid'].indexOf(cookie)>-1||cookie.indexOf('_ga_')>-1)){Cookies.remove(cookie,{domain:'.'+window.location.hostname});var hostnameParts=window.location.hostname.split('.');if(hostnameParts.length>2){var topDomain=hostnameParts[hostnameParts.length-2]+'.'+hostnameParts[hostnameParts.length-1];Cookies.remove(cookie,{domain:'.'+topDomain});}}
if(!$scope.currentPreferences.matomo_consent&&cookie.startsWith('_pk_')){Cookies.remove(cookie);}
if(!$scope.currentPreferences.at_consent&&(['atauthority','atuserid','atidvisitor'].indexOf(cookie)>-1)){Cookies.remove(cookie);}
if(!$scope.currentPreferences.piano_consent&&(['_pctx','_pcid','_pprv'].indexOf(cookie)>-1)){Cookies.remove(cookie);}});};function removeCookiePreferences(){Cookies.remove('cookies_preferences');Cookies.remove('cookies_preferences',cookieParams.old);}
$scope.saveCookiesPreferences=function(e){$scope.injectTrackers();$scope.removeOptedOutTrackingCookies();var cookies_preferences={functional_cookies:$scope.currentPreferences.functional_cookies_consent,ga:$scope.currentPreferences.ga_consent,matomo:$scope.currentPreferences.matomo_consent,xiti:$scope.currentPreferences.xiti_consent,at:$scope.currentPreferences.at_consent,piano:$scope.currentPreferences.piano_consent,eulerian:$scope.currentPreferences.eulerian_consent,timestamp:Date.now(),};removeCookiePreferences();Cookies.set('cookies_preferences',JSON.stringify(cookies_preferences),cookieParams.new);$scope.open=false;var consentPayload={};if($scope.gaConfigured||$scope.ga4Configured)consentPayload['google-analytics']=$scope.currentPreferences.ga_consent;if($scope.matomoConfigured)consentPayload['matomo']=$scope.currentPreferences.matomo_consent;if($scope.xitiConfigured)consentPayload['xiti']=$scope.currentPreferences.xiti_consent;if($scope.atConfigured)consentPayload['smart-tag']=$scope.currentPreferences.at_consent;if($scope.pianoConfigured)consentPayload['piano']=$scope.currentPreferences.piano_consent;if($scope.eulerianConfigured)consentPayload['eulerian']=$scope.currentPreferences.eulerian_consent;CookiesAPI.consent(consentPayload).catch(function(response){console.error('Error while recording user consent.',response.data);}).then($scope.closeModal);e.stopPropagation();};$scope.retrieveCookiesPreferences();},link:function(scope,element,attrs,linkCtrl){scope.closeModal=linkCtrl.closeCookiesPreferences;}};}]);}());;document.addEventListener('DOMContentLoaded',function(){angular.bootstrap($('.ods-content > header'),['ods.header','ods-widgets']);angular.bootstrap($('body > footer'),['ods.footer','ods-widgets']);});;